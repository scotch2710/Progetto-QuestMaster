<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Avventure di Shrek: La Missione per la Palude</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400&display=swap');

        body {
            font-family: 'Lora', serif;
            background-color: #D3C5A3; /* Colore pergamena scura */
            color: #3a2d21;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23bcae88" fill-opacity="0.1"%3E%3Cpath d="M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
        }

        #game-container {
            background-color: #FDF5E6; /* Colore pergamena chiara */
            border: 2px solid #8B4513; /* Marrone sella */
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
            max-width: 800px;
            width: 100%;
            padding: 30px 40px;
            text-align: center;
        }

        h1 {
            color: #5D4037;
            border-bottom: 2px solid #8D6E63;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        #story-text {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
            text-align: justify;
        }

        #choices-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .choice-button {
            background-color: #795548; /* Marrone */
            color: #FFFFFF;
            border: 2px solid #5D4037;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Lora', serif;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            width: 100%;
        }

        .choice-button:hover {
            background-color: #5D4037; /* Marrone più scuro */
            transform: translateY(-2px);
        }

        .choice-button:active {
            transform: translateY(1px);
        }

        /* Responsive design per schermi più piccoli */
        @media (min-width: 600px) {
            #choices-container {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>

    <main id="game-container">
        <h1>La Missione per la Palude</h1>
        <div id="story-text">
            Caricamento della storia...
        </div>
        <div id="choices-container">
            <!-- I pulsanti delle scelte verranno generati qui -->
        </div>
    </main>

    <script>
        const storyTextElement = document.getElementById('story-text');
        const choicesContainerElement = document.getElementById('choices-container');

        const storyNodes = [
            {
                id: 'start',
                text: 'Nel regno di Duloc, tutte le creature magiche sono state esiliate dal perfido Lord Farquaad e si sono rifugiate nella tua palude. La tua pace è stata distrutta da fate, gnomi e un lupo parlante nel tuo letto! Indignato, decidi che devi fare qualcosa.',
                choices: [
                    { text: 'Andare a Duloc per reclamare la tua terra da Farquaad.', nextNode: 'duloc_gate' },
                    { text: 'Cercare di cacciare via le creature con la forza.', nextNode: 'cacciare_creature' }
                ]
            },
            {
                id: 'cacciare_creature',
                text: 'Provi a spaventare e cacciare le creature, ma sono troppe e disperate. Ti guardano con occhi tristi. Ti rendi conto che l\'unica soluzione è affrontare chi le ha mandate lì in primo luogo.',
                choices: [
                    { text: 'Rassegnarsi e partire per Duloc.', nextNode: 'duloc_gate' }
                ]
            },
            {
                id: 'duloc_gate',
                text: 'Arrivi a Duloc giusto in tempo per un torneo. Con la tua forza bruta, sconfiggi facilmente tutti i cavalieri. Lord Farquaad, impressionato e spaventato, ti propone un accordo: ti restituirà la palude se salverai per lui la principessa Fiona, imprigionata in una torre sorvegliata da un drago.',
                choices: [
                    { text: 'Accettare. La palude vale bene una piccola missione.', nextNode: 'partenza_missione' },
                    { text: 'Rifiutare l\'accordo e minacciare Farquaad.', nextNode: 'minacciare_farquaad_fine' }
                ]
            },
            {
                id: 'minacciare_farquaad_fine',
                text: 'Minacci Lord Farquaad, ma sei solo un orco contro l\'intero esercito di Duloc. Le guardie ti circondano e ti sopraffanno. Non rivedrai mai più la tua amata palude. FINE.',
                choices: [
                    { text: 'Ricomincia l\'avventura', nextNode: 'start' }
                ]
            },
            {
                id: 'partenza_missione',
                text: 'Accetti l\'accordo. Mentre parti, un asino parlante di nome Ciuchino, che hai salvato poco prima, decide di seguirti. Il viaggio verso la torre del drago inizia. Il sentiero si biforca: una strada attraversa una foresta spettrale, l\'altra un ponte di corda su un canyon profondo.',
                choices: [
                    { text: 'Avventurarsi nella foresta spettrale.', nextNode: 'foresta_oscura' },
                    { text: 'Attraversare il ponte pericolante.', nextNode: 'ponte_pericolante' }
                ]
            },
            {
                id: 'foresta_oscura',
                text: 'La foresta è buia e piena di rumori inquietanti. Improvvisamente, sei circondato da un gruppo di uomini mascherati. Sono i cavalieri di Farquaad, inviati per "testare" le tue abilità.',
                choices: [
                    { text: 'Combatterli con la tua forza da orco.', nextNode: 'arrivo_torre' },
                    { text: 'Usare Ciuchino per creare un diversivo e aggirarli.', nextNode: 'arrivo_torre' }
                ]
            },
            {
                id: 'ponte_pericolante',
                text: 'Il ponte di corda scricchiola minacciosamente. Ciuchino è pietrificato dalla paura. Devi convincerlo a proseguire.',
                choices: [
                    { text: 'Incoraggiare Ciuchino con parole gentili.', nextNode: 'arrivo_torre' },
                    { text: 'Trascinarlo di peso sull\'altra sponda.', nextNode: 'arrivo_torre' }
                ]
            },
            {
                id: 'arrivo_torre',
                text: 'Superato il primo ostacolo, tu e Ciuchino arrivate finalmente in vista della torre, circondata da un fossato di lava e ossa. L\'atmosfera è cupa. All\'interno, un enorme drago rosso dorme su un tesoro.',
                choices: [
                    { text: 'Cercare di passare in silenzio senza svegliare il drago.', nextNode: 'passare_in_silenzio' },
                    { text: 'Affrontare il drago. Un po\' di fuoco non spaventa un orco!', nextNode: 'affrontare_drago_fine' }
                ]
            },
            {
                id: 'affrontare_drago_fine',
                text: 'Il tuo ruggito sveglia il drago, che ti guarda infastidito prima di incenerirti con una potente fiammata. Forse la furtività sarebbe stata una scelta migliore. FINE.',
                choices: [
                    { text: 'Ricomincia dal principio', nextNode: 'start' }
                ]
            },
            {
                id: 'passare_in_silenzio',
                text: 'Ti muovi con cautela, ma il tuo elmo cade e il rumore metallico sveglia il drago! La creatura si lancia all\'inseguimento, ma con sorpresa di tutti, sembra infatuarsi di Ciuchino, scambiandolo forse per un piccolo stallone.',
                choices: [
                    { text: 'Approfittare della distrazione per salire sulla torre.', nextNode: 'salvataggio_fiona' },
                    { text: 'Cercare di intrappolare il drago per salvare Ciuchino (e te stesso).', nextNode: 'salvataggio_fiona' }
                ]
            },
            {
                id: 'salvataggio_fiona',
                text: 'Mentre il drago è... impegnato con Ciuchino, sali in cima alla torre. Lì trovi la Principessa Fiona. È determinata, abile nel combattimento e molto impaziente di andarsene. Non è esattamente la damigella in pericolo che ti aspettavi.',
                choices: [
                    { text: 'Prenderla e iniziare la fuga dalla torre.', nextNode: 'fuga_dalla_torre' }
                ]
            },
            {
                id: 'fuga_dalla_torre',
                text: 'Fuggite dalla torre tra mille peripezie. Durante il lungo viaggio di ritorno verso Duloc, inizi a conoscere meglio Fiona. Le sue battute, la sua forza e il suo rutto ti affascinano. Una sera, però, lei si allontana e si nasconde al calar della notte, insistendo per dormire da sola.',
                choices: [
                    { text: 'Rispettare la sua privacy. Ognuno ha i suoi segreti.', nextNode: 'arrivo_da_farquaad_ignaro' },
                    { text: 'La curiosità è troppa. La segui per scoprire cosa nasconde.', nextNode: 'scoperta_segreto' }
                ]
            },
            {
                id: 'scoperta_segreto',
                text: 'La segui fino a un vecchio mulino e la spii. Con il buio, vedi Fiona trasformarsi in un\'orchessa! Scopri che è vittima di una maledizione: di giorno umana, di notte orchessa. Ora tutto ha un senso. Ti vede e il suo sguardo è pieno di paura e vergogna.',
                choices: [
                    { text: 'Accettarla per quello che è. Dopotutto, anche tu sei un orco.', nextNode: 'confessione' },
                    { text: 'Chiamarla "mostro" e trattarla con freddezza.', nextNode: 'arrivo_da_farquaad_consapevole_fine' }
                ]
            },
            {
                id: 'confessione',
                text: 'Le dici che non ti importa della maledizione, che lei ti piace per come è. Fiona è commossa. Parlate tutta la notte. Il legame tra voi è diventato fortissimo. Il giorno dopo, vedete Duloc all\'orizzonte.',
                choices: [
                    { text: 'Interrompere il matrimonio e dichiarare il tuo amore!', nextNode: 'finale_buono' },
                    { text: 'Lasciarla a Farquaad. Un accordo è un accordo.', nextNode: 'arrivo_da_farquaad_consapevole_fine' }
                ]
            },
            {
                id: 'arrivo_da_farquaad_ignaro',
                text: 'Consegni Fiona a Lord Farquaad. Lui ti dà l\'atto di proprietà della palude. Mentre ti allontani, senti un vuoto dentro. Torni alla tua palude, finalmente solo, ma la quiete non è più così dolce come ricordavi. FINE.',
                choices: [
                    { text: 'Ricomincia per un finale migliore', nextNode: 'start' }
                ]
            },
            {
                id: 'arrivo_da_farquaad_consapevole_fine',
                text: 'Porti Fiona da Farquaad. Il suo sguardo deluso ti trafigge il cuore. Lui la prende in sposa e tu riottieni la tua palude. Hai ottenuto ciò per cui hai lottato, ma hai perso qualcosa di infinitamente più prezioso. FINE.',
                choices: [
                    { text: 'Ricomincia per rimediare', nextNode: 'start' }
                ]
            },
            {
                id: 'finale_buono',
                text: 'Tu, Ciuchino e il Drago (ora vostro alleato) interrompete il matrimonio. Dichiari il tuo amore per Fiona. Il bacio del vero amore spezza l\'incantesimo, rivelando la sua "vera forma": un\'orchessa. Sconfiggete Farquaad e tornate alla palude, dove vivete per sempre felici, contenti e rumorosi. HAI VINTO!',
                choices: [
                    { text: 'Gioca di nuovo!', nextNode: 'start' }
                ]
            }
        ];

        function startGame() {
            showStoryNode('start');
        }

        function showStoryNode(storyNodeId) {
            const storyNode = storyNodes.find(node => node.id === storyNodeId);
            
            storyTextElement.innerText = storyNode.text;

            while (choicesContainerElement.firstChild) {
                choicesContainerElement.removeChild(choicesContainerElement.firstChild);
            }

            storyNode.choices.forEach(choice => {
                const button = document.createElement('button');
                button.innerText = choice.text;
                button.classList.add('choice-button');
                button.addEventListener('click', () => selectChoice(choice));
                choicesContainerElement.appendChild(button);
            });
        }

        function selectChoice(choice) {
            showStoryNode(choice.nextNode);
        }

        // Inizia il gioco
        startGame();
    </script>

</body>
</html>