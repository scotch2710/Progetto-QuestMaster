<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Missione di Shrek</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital@0;1&display=swap');

        body {
            background-color: #3a4d39;
            color: #e8e6e3;
            font-family: 'Lora', serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        #game-container {
            width: 100%;
            max-width: 800px;
            background-color: #556b2f;
            border: 5px solid #2e4600;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
            padding: 30px;
            text-align: center;
        }

        h1 {
            font-family: 'Cinzel', serif;
            color: #f0e68c;
            text-shadow: 2px 2px 4px #000;
            border-bottom: 2px solid #f0e68c;
            padding-bottom: 10px;
            margin-top: 0;
        }

        #story-text {
            font-size: 1.2em;
            line-height: 1.6;
            text-align: justify;
            min-height: 150px;
            margin-bottom: 30px;
            padding: 15px;
            background-color: rgba(0,0,0,0.2);
            border-radius: 8px;
            border-left: 3px solid #f0e68c;
        }

        #choices {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 600px) {
            #choices {
                grid-template-columns: 1fr 1fr;
            }
        }

        .choice-btn {
            background-color: #8b4513;
            color: #ffffff;
            border: 2px solid #5d2906;
            border-radius: 8px;
            padding: 15px 20px;
            font-family: 'Cinzel', serif;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            text-shadow: 1px 1px 2px #000;
        }

        .choice-btn:hover {
            background-color: #a0522d;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
        }

        .choice-btn:active {
            transform: translateY(0);
        }

    </style>
</head>
<body>

    <main id="game-container">
        <h1>La Missione di Shrek</h1>
        <div id="story-text">
            Caricamento della storia...
        </div>
        <div id="choices">
            <!-- I bottoni delle scelte verranno inseriti qui dal JavaScript -->
        </div>
    </main>

    <script>
        const storyTextElement = document.getElementById('story-text');
        const choicesElement = document.getElementById('choices');

        const story = {
            start: {
                text: "Nel regno di Duloc, tutte le creature magiche sono state esiliate nella tua palude. La tua pace è stata invasa da fate, lupi e maialini. Indignato, decidi che è ora di agire.",
                choices: [
                    { text: "Vai a Duloc per parlare con Lord Farquaad.", nextScene: 'goToDuloc' },
                    { text: "Prova a scacciare le creature da solo.", nextScene: 'failToClearSwamp' }
                ]
            },
            failToClearSwamp: {
                text: "Provi a spaventarli con il tuo ruggito più potente, ma sono troppi e semplicemente ti ignorano. È inutile. La tua palude è ancora invasa.",
                choices: [
                    { text: "Rassegnati e vai a Duloc.", nextScene: 'goToDuloc' },
                    { text: "Riprova con più rabbia.", nextScene: 'failToClearSwamp' }
                ]
            },
            goToDuloc: {
                text: "Arrivi al castello di Duloc e incontri il perfido Lord Farquaad. Ti propone un accordo: libererà la tua palude se tu salverai per lui la principessa Fiona, imprigionata in una torre sorvegliata da un drago.",
                choices: [
                    { text: "Accetta l'accordo: la palude vale bene una principessa.", nextScene: 'startJourney' },
                    { text: "Rifiuta e torna alla palude invasa.", nextScene: 'backToSwamp' }
                ]
            },
            backToSwamp: {
                text: "Rifiuti l'accordo di Farquaad e torni a casa. La tua palude rimane un caotico rifugio per creature magiche, e la tua quiete è perduta per sempre. FINE.",
                choices: [
                    { text: "Ricomincia l'avventura.", nextScene: 'start' }
                ]
            },
            startJourney: {
                text: "Accetti la missione. Insieme a un ciarliero asino di nome Ciuchino, ti metti in viaggio. Il sentiero per la torre del drago attraversa una foresta oscura e piena di pericoli.",
                choices: [
                    { text: "Segui il sentiero principale, più veloce ma esposto.", nextScene: 'meetKnights' },
                    { text: "Prendi una scorciatoia tra i fitti alberi.", nextScene: 'darkWoodsPath' }
                ]
            },
            meetKnights: {
                text: "Sul sentiero principale incontrate una pattuglia di cavalieri di Farquaad. Non sembrano amichevoli.",
                choices: [
                    { text: "Combatti i cavalieri con la tua forza da orco.", nextScene: 'knightsDefeated' },
                    { text: "Nascondetevi e aspettate che passino.", nextScene: 'knightsDefeated' }
                ]
            },
            darkWoodsPath: {
                text: "La scorciatoia si rivela un labirinto di rovi e sentieri ingannevoli. Perdete tempo prezioso, ma alla fine riuscite a uscirne. Davanti a voi, un ponte pericolante sospeso su un fiume di lava conduce alla torre.",
                choices: [
                    { text: "Prosegui verso il ponte.", nextScene: 'bridge' }
                ]
            },
            knightsDefeated: {
                text: "Che tu li abbia affrontati o evitati, i cavalieri non sono più un problema. Arrivi di fronte alla torre del drago, separata da te da un ponte di corda e legno marcio sospeso su un lago di lava.",
                choices: [
                    { text: "Prosegui verso il ponte.", nextScene: 'bridge' }
                ]
            },
            bridge: {
                text: "Il ponte scricchiola minacciosamente sotto i tuoi piedi. Il calore della lava sale fino a te.",
                choices: [
                    { text: "Attraversa con cautela, un passo alla volta.", nextScene: 'reachTower' },
                    { text: "Corri a perdifiato per arrivare prima possibile.", nextScene: 'bridgeFail' }
                ]
            },
            bridgeFail: {
                text: "La tua fretta è fatale. Il ponte cede di schianto e precipiti nel fiume di lava sottostante. La missione finisce qui. FINE.",
                choices: [
                    { text: "Ricomincia l'avventura.", nextScene: 'start' }
                ]
            },
            reachTower: {
                text: "Con pazienza e nervi saldi, attraversi il ponte. Sei finalmente dentro la fortezza. In un'enorme sala, un gigantesco drago rosso dorme su un mucchio d'oro e ossa.",
                choices: [
                    { text: "Cerca di passare in silenzio.", nextScene: 'sneakPastDragon' },
                    { text: "Affronta il drago direttamente.", nextScene: 'fightDragon' }
                ]
            },
            sneakPastDragon: {
                text: "Ti muovi come un'ombra, ma Ciuchino inciampa rumorosamente. Il drago si sveglia di soprassalto e lo mette all'angolo, pronto a incenerirlo!",
                choices: [
                    { text: "Crea un diversivo per salvare Ciuchino.", nextScene: 'donkeyDistracts' },
                    { text: "Abbandona Ciuchino e corri alla torre.", nextScene: 'abandonDonkey' }
                ]
            },
            fightDragon: {
                text: "Decidi di affrontare la bestia. Il drago ti vede e scatena una vampata di fiamme contro di te!",
                choices: [
                    { text: "Usa uno scudo di metallo per deviare il fuoco.", nextScene: 'dragonNeutralized' },
                    { text: "Prova a colpirlo a mani nude.", nextScene: 'dragonWin' }
                ]
            },
            dragonWin: {
                text: "Sei forte, ma non a prova di fuoco. Il drago ti sconfigge facilmente. Sei diventato parte del suo tesoro... carbonizzato. FINE.",
                choices: [
                    { text: "Ricomincia l'avventura.", nextScene: 'start' }
                ]
            },
            donkeyDistracts: {
                text: "Mentre il drago (o meglio, la dragonessa) è... affascinata dalle lusinghe di Ciuchino, hai via libera per salire in cima alla torre più alta.",
                choices: [
                    { text: "Sali a salvare la principessa.", nextScene: 'saveFiona' }
                ]
            },
            abandonDonkey: {
                text: "Senza l'aiuto di Ciuchino, riesci a raggiungere Fiona, ma la dragonessa infuriata vi blocca la via d'uscita. Siete intrappolati per sempre. FINE.",
                choices: [
                    { text: "Ricomincia l'avventura.", nextScene: 'start' }
                ]
            },
            dragonNeutralized: {
                text: "Con astuzia, usi lo scudo per deviare le fiamme e riesci a far impigliare la catena del drago attorno a un pilastro, intrappolandolo. La via è libera.",
                choices: [
                    { text: "Sali a salvare la principessa.", nextScene: 'saveFiona' }
                ]
            },
            saveFiona: {
                text: "Nella stanza più alta della torre trovi la principessa Fiona. È sorpresa di vedere un orco come suo salvatore, ma non ha tempo per le formalità. Insieme, fuggite dalla torre.",
                choices: [
                    { text: "Inizia il viaggio di ritorno verso Duloc.", nextScene: 'returnJourney' }
                ]
            },
            returnJourney: {
                text: "Durante il viaggio di ritorno, inizi a conoscere meglio Fiona e, contro ogni previsione, nasce un legame. Una sera, al tramonto, lei si comporta in modo strano e si nasconde in un vecchio mulino.",
                choices: [
                    { text: "Rispetta la sua privacy e aspetta fuori.", nextScene: 'ignoreSecret' },
                    { text: "Sei curioso, vai a vedere cosa nasconde.", nextScene: 'discoverSecret' }
                ]
            },
            ignoreSecret: {
                text: "Decidi di non impicciarti. La mattina dopo, riprendete il cammino e arrivate a Duloc. Non hai mai scoperto il suo segreto.",
                choices: [
                    { text: "Consegna Fiona a Farquaad come da accordo.", nextScene: 'badEnding' }
                ]
            },
            discoverSecret: {
                text: "Entri nel mulino e scopri il segreto di Fiona: una maledizione la trasforma in un'orchessa ogni notte. Ciuchino ti fa capire che solo il bacio del vero amore può spezzare l'incantesimo e che forse, quel vero amore, sei tu.",
                choices: [
                    { text: "Corri a Duloc per fermare il matrimonio!", nextScene: 'goodEndingPath' },
                    { text: "Inorridito, la porti da Farquaad il prima possibile.", nextScene: 'badEnding' }
                ]
            },
            badEnding: {
                text: "Consegni Fiona a Lord Farquaad. Lui, in cambio, ti restituisce l'atto di proprietà della tua palude. Sei tornato a casa, da solo. La palude è finalmente silenziosa. Ma ti senti più solo di prima. FINE.",
                choices: [
                    { text: "Ricomincia per un finale migliore.", nextScene: 'start' }
                ]
            },
            goodEndingPath: {
                text: "Capisci di amare Fiona. Corri a Duloc e interrompi il matrimonio appena in tempo, dichiarando i tuoi sentimenti davanti a tutti.",
                choices: [
                    { text: "Bacia Fiona per spezzare l'incantesimo.", nextScene: 'trueLoveKiss' }
                ]
            },
            trueLoveKiss: {
                text: "Il tuo bacio spezza l'incantesimo. Fiona rimane un'orchessa, la sua vera forma d'amore. Dopo aver sistemato Farquaad, tornate insieme alla palude. Ora non sei più solo. Hai riconquistato la tua casa e hai trovato l'amore. VIVRETE PER SEMPRE FELICI E CONTENTI!",
                choices: [
                    { text: "Gioca di nuovo!", nextScene: 'start' }
                ]
            }
        };

        function startGame() {
            showScene('start');
        }

        function showScene(sceneKey) {
            const scene = story[sceneKey];
            if (!scene) {
                console.error(`Scena non trovata: ${sceneKey}`);
                return;
            }

            storyTextElement.innerText = scene.text;
            
            while (choicesElement.firstChild) {
                choicesElement.removeChild(choicesElement.firstChild);
            }

            scene.choices.forEach(choice => {
                const button = document.createElement('button');
                button.innerText = choice.text;
                button.classList.add('choice-btn');
                button.addEventListener('click', () => showScene(choice.nextScene));
                choicesElement.appendChild(button);
            });
        }

        startGame();
    </script>

</body>
</html>