<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Missione di Shrek</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&family=Lora:ital,wght@0,400;0,700;1,400&display=swap');

        :root {
            --primary-bg: #2c3e50;
            --secondary-bg: #34495e;
            --text-color: #ecf0f1;
            --accent-color: #27ae60;
            --accent-hover: #2ecc71;
            --danger-color: #c0392b;
            --danger-hover: #e74c3c;
        }

        body {
            font-family: 'Lora', serif;
            background-color: var(--primary-bg);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            line-height: 1.6;
        }

        main {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            padding: 30px 40px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        h1 {
            font-family: 'IM Fell English SC', serif;
            color: var(--accent-color);
            font-size: 3em;
            margin-bottom: 20px;
            letter-spacing: 1px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        #story-text {
            font-size: 1.2em;
            margin-bottom: 30px;
            text-align: justify;
        }

        #choices {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 600px) {
            #choices {
                grid-template-columns: 1fr 1fr;
            }
        }

        .choice-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 15px 20px;
            font-size: 1em;
            font-family: 'Lora', serif;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        
        .choice-btn:hover {
            background-color: var(--accent-hover);
            transform: translateY(-2px);
        }

        .choice-btn.danger {
            background-color: var(--danger-color);
        }

        .choice-btn.danger:hover {
            background-color: var(--danger-hover);
        }

        .ending {
            border-left: 5px solid var(--accent-color);
            padding-left: 15px;
            background-color: rgba(0,0,0,0.1);
            border-radius: 0 5px 5px 0;
        }
    </style>
</head>
<body>

    <main>
        <h1>La Missione di Shrek</h1>
        <p id="story-text">Caricamento della storia...</p>
        <div id="choices"></div>
    </main>

    <script>
        const storyTextElement = document.getElementById('story-text');
        const choicesElement = document.getElementById('choices');

        const story = {
            start: {
                text: "Nel regno di Duloc, il perfido Lord Farquaad ha esiliato tutte le creature magiche. Sfortunatamente per te, la loro nuova casa è la tua amata palude. La tua tranquillità è stata brutalmente interrotta. È ora di agire.",
                choices: [
                    { text: "Vai a Duloc per reclamare la tua terra.", nextScene: "goToDuloc" },
                    { text: "Prova a cacciare le creature da solo.", nextScene: "failChase" }
                ]
            },
            failChase: {
                text: "Hai passato giorni a urlare e spaventare le creature, ma sono troppe. Per ogni fata che scacci, arrivano tre nani. È inutile. La tua palude non sarà mai più la stessa se non affronti il problema alla radice.",
                choices: [
                    { text: "Rassegnati e vai a Duloc.", nextScene: "goToDuloc" },
                    { text: "Costruisci una recinzione più alta.", nextScene: "gameOverFence" }
                ]
            },
            goToDuloc: {
                text: "Arrivi al castello di Duloc proprio mentre è in corso un torneo. Lord Farquaad, vedendoti, ti propone un accordo: ti restituirà la palude se salverai per lui la Principessa Fiona, imprigionata in una torre sorvegliata da un drago.",
                choices: [
                    { text: "Accetta l'accordo. La palude vale il rischio.", nextScene: "acceptDeal" },
                    { text: "Rifiuta. Non sei il galoppino di nessuno.", nextScene: "refuseDeal" }
                ]
            },
            acceptDeal: {
                text: "Accetti. Lungo la strada, incontri un asino parlante di nome Ciuchino che si offre di accompagnarti. La sua parlantina è insopportabile, ma forse potrebbe tornare utile.",
                choices: [
                    { text: "Accetta la sua compagnia. Meglio non essere soli.", nextScene: "journeyWithDonkey" },
                    { text: "Mandalo via. Preferisci il silenzio.", nextScene: "journeyAlone" }
                ]
            },
            refuseDeal: {
                text: "Rifiuti l'offerta di Farquaad e provi a usare la forza. Le sue guardie ti sopraffanno rapidamente. Veloce e umiliante, la tua avventura finisce qui. Non rivedrai mai più la tua palude.",
                isEnding: true,
                choices: [
                    { text: "Ricomincia", nextScene: "start" }
                ]
            },
            journeyWithDonkey: {
                text: "Tu e Ciuchino attraversate territori impervi. Arrivate davanti a un ponte di corda sospeso su un baratro di lava che circonda la torre del drago. Il ponte sembra pericolante.",
                choices: [
                    { text: "Attraversate il ponte con cautela.", nextScene: "atTheTower" },
                    { text: "Cerca un altro percorso.", nextScene: "wasteTime" }
                ]
            },
            journeyAlone: {
                text: "Viaggi da solo. È più tranquillo, ma anche più difficile orientarsi. Arrivi davanti al baratro di lava che circonda la torre, ma senza la distrazione di Ciuchino, superare il ponte e il drago sembra un'impresa impossibile.",
                 isEnding: true,
                choices: [
                    { text: "Torni indietro sconfitto.", nextScene: "refuseDeal" }
                ]
            },
            wasteTime: {
                text: "Dopo ore passate a cercare un'alternativa, ti rendi conto che il ponte è l'unica via. Hai solo perso tempo prezioso. Meglio attraversarlo.",
                choices: [
                    { text: "Attraversa il ponte.", nextScene: "atTheTower" }
                ]
            },
            atTheTower: {
                text: "Siete dall'altra parte. La torre si erge minacciosa. All'interno, sentite il respiro pesante del drago. È il momento di decidere come agire.",
                choices: [
                    { text: "Usa Ciuchino come esca per distrarre il drago.", nextScene: "neutralizeDragonSmart" },
                    { text: "Carica a testa bassa, sperando di spaventarlo.", nextScene: "gameOverDragon" }
                ]
            },
            neutralizeDragonSmart: {
                text: "Il piano, sorprendentemente, funziona. La Draghessa si invaghisce di Ciuchino, lasciandoti via libera per salire in cima alla torre.",
                choices: [
                    { text: "Sali e salva la principessa.", nextScene: "rescueFiona" }
                ]
            },
            rescueFiona: {
                text: "In cima alla torre trovi la Principessa Fiona. Non è esattamente come te l'aspettavi. Dopo un breve 'scambio di convenevoli', la convinci a seguirti. La missione è quasi compiuta.",
                choices: [
                    { text: "Inizia il viaggio di ritorno verso Duloc.", nextScene: "returnJourney" }
                ]
            },
            returnJourney: {
                text: "Durante il viaggio di ritorno, inizi a conoscere Fiona. Scopri che non è la tipica principessa indifesa. In una notte stellata, mentre vi accampate, noti che è strana e si nasconde.",
                choices: [
                    { text: "Ignorala e concentrati sulla missione.", nextScene: "deliverFionaCold" },
                    { text: "Prova a parlarle e a capire cosa la turba.", nextScene: "bondWithFiona" }
                ]
            },
            bondWithFiona: {
                text: "Le parli con una gentilezza che non pensavi di avere. Lei si apre un po', e tra voi nasce un legame inaspettato. Questo viaggio sta cambiando qualcosa dentro di te.",
                choices: [
                    { text: "Continua il viaggio verso Duloc.", nextScene: "deliverFionaWarm" }
                ]
            },
            deliverFionaCold: {
                text: "Arrivate a Duloc. Consegni Fiona a Lord Farquaad. Lui, in cambio, ti consegna l'atto di proprietà della tua palude, libera da tutte le creature. Hai ottenuto ciò che volevi. Ma mentre te ne vai, senti un vuoto inaspettato.",
                isEnding: true,
                choices: [
                    { text: "Torna alla tua palude solitaria. (Finale 1/3)", nextScene: "swampAloneEnding" }
                ]
            },
            deliverFionaWarm: {
                text: "Arrivate a Duloc. Vedi l'arroganza di Farquaad e il modo in cui tratta Fiona. Consegnarla a lui ti sembra sbagliato. Farquaad ti porge l'atto di proprietà della palude.",
                choices: [
                    { text: "Prendi l'atto e vattene. Un accordo è un accordo.", nextScene: "swampAloneEnding" },
                    { text: "Ascolta il tuo cuore. Fermali!", nextScene: "interruptWedding" }
                ]
            },
            interruptWedding: {
                text: "Irrompi al matrimonio giusto in tempo. Dichiari i tuoi sentimenti per Fiona. Lei, commossa, ricambia. Il bacio del vero amore spezza il suo incantesimo, rivelando la sua vera forma: un'orchessa. Farquaad, disgustato, viene divorato dalla Draghessa. Avete vinto.",
                isEnding: true,
                choices: [
                    { text: "Vivi felice e contento nella palude. (Finale Migliore 3/3)", nextScene: "start" }
                ]
            },
            swampAloneEnding: {
                text: "Sei tornato nella tua palude. È silenziosa. Pacifica. Tua. Hai completato la missione e ottenuto esattamente quello che volevi. Eppure, il silenzio ora sembra assordante. Sei solo.",
                isEnding: true,
                choices: [
                    { text: "Ricomincia l'avventura.", nextScene: "start" }
                ]
            },
            gameOverFence: {
                text: "La recinzione non serve a nulla contro creature che volano, scavano o semplicemente la scavalcano. Hai fallito. FINE.",
                isEnding: true,
                choices: [
                    { text: "Ricomincia", nextScene: "start" }
                ]
            },
            gameOverDragon: {
                text: "Un orco contro un drago sputafuoco. Chi l'avrebbe mai detto? Sei stato arrostito e mangiato. Un finale croccante. FINE.",
                isEnding: true,
                choices: [
                    { text: "Ricomincia", nextScene: "start" }
                ]
            }
        };

        function showScene(sceneKey) {
            const scene = story[sceneKey];
            if (!scene) {
                console.error(`Scena non trovata: ${sceneKey}`);
                return;
            }

            storyTextElement.innerHTML = scene.text;
            storyTextElement.className = scene.isEnding ? 'ending' : '';
            
            while (choicesElement.firstChild) {
                choicesElement.removeChild(choicesElement.firstChild);
            }

            scene.choices.forEach(choice => {
                const button = document.createElement('button');
                button.innerText = choice.text;
                button.classList.add('choice-btn');
                
                if (scene.isEnding) {
                    button.classList.add('danger');
                }

                button.addEventListener('click', () => {
                    showScene(choice.nextScene);
                });
                choicesElement.appendChild(button);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            showScene('start');
        });
    </script>

</body>
</html>